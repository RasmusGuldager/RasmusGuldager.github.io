<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Pathfinding</title>

    <link rel="stylesheet" type="text/css" href="style.css">

    <script src="../libraries/p5.min.js"></script>
    <script src="../libraries/p5.sound.min.js"></script>

  </head>

  <body>
    <img src="../Graph.png" alt="Graph">
    <h1>Pathfinding</h1>
    <div id="wrap">

      <div id="Settings">
        <h2>Settings</h2>
        <div class="boks"><p>Rows / Columns</p>
        <input id="rowsCols" type="number" value="30"></div>
        <div class="boks"><p>Width (px)</p>
        <input id="width" type="number" value="450"></div>
        <div class="boks"><p>% of squares that are walls</p>
        <input id="walls" type="number" value="50"> </div>
        <p>Use generated maze in pathfinding</p>
        <label class="switch">
          <input id="checkbox" type="checkbox">
          <span class="slider"></span>
        </label>
        <p style="font-style: italic;">Press enter to submit</p>
        </div>

        <div class="navbar">
    <div class="dropdown">
      <button class="dropbtn">Pathfinding</button>
    <div class="dropdown-content">
    <a href="../A-star/A-star.html">A* pathfinding</a>
    <a href="../BFS/BFS.html">BFS pathfinding</a>
    <a href="../DFS/DFS.html">DFS pathfinding</a>
    <a href="../Dijkstra/Dijkstra.html">Dijkstra pathfinding</a></div></div>
    <div class="dropdown">
      <button class="dropbtn">Mazegeneration</button>
      <div class="dropdown-content">
    <a id="maze1" class="mazee" href="../DFS mazegeneration/DFSMaze.html">Randomized DFS mazegeneration</a>
    <a id="maze2" class="mazee" href="../Prim's mazegeneration/PrimsMaze.html">Randomized Prim's mazegeneration</a>
  </div>
  </div>
  </div>
</div>

    <script>
      document.getElementById("checkbox").checked = localStorage.getItem("useMaze") == "true"
        let numinput = document.querySelectorAll('input[type="number"]');
        document.querySelector('input[type="checkbox"]').addEventListener("click", (e) => {
          const useMaze = document.getElementById("checkbox").checked
          localStorage.setItem("useMaze", useMaze)
        })
        for (let i = 0; i <= 2; i++) {
          numinput[i].addEventListener("keypress", (e) => {
          if (e.key == "Enter") {
            if (document.getElementById("rowsCols").value < 5 || document.getElementById("width").value < document.getElementById("rowsCols").value * 4 || document.getElementById("rowsCols").value > 100 || document.getElementById("walls").value < 0 || document.getElementById("walls").value > 100) {
              window.alert("Maze is too large or too small")
            } else {
            const rows = document.getElementById("rowsCols").value;
            const cols = document.getElementById("rowsCols").value;
            const width = document.getElementById("width").value/rows;
            const walls = document.getElementById("walls").value;
            localStorage.setItem("grid", JSON.stringify({rows:rows,cols:cols,w:width,walls:walls}))
            }
        }
    })}

  for (let i = 0; i <= 1; i++) {
   document.querySelectorAll(".mazee")[i].addEventListener("click", (e) => {
    const {rows} = JSON.parse(localStorage.getItem("grid"))
    if (rows % 2 == 0) {
      window.alert("Rows/cols must be odd in the maze generation")
      document.getElementById("maze1").href = "index.html"
      document.getElementById("maze2").href = "index.html"
    }
   })
  } 
    </script>
  </body>
</html>